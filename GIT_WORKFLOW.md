# üåø Git Branch Workflow Guide

Komplet guide til at arbejde med branches, merge, push og pull i dit CI/CD projekt.

## üìã Indholdsfortegnelse

1. [Git Basics](#git-basics)
2. [Branch Workflow](#branch-workflow)
3. [Daglig Workflow](#daglig-workflow)
4. [Pull Requests](#pull-requests)
5. [Merge Strategier](#merge-strategier)
6. [Fejlfinding](#fejlfinding)
7. [Best Practices](#best-practices)
8. [Cheat Sheet](#cheat-sheet)

---

## üéØ Git Basics

### Hvad er hvad?

**Branch:**
- En parallel version af din kode
- Lader dig arbejde p√• nye features uden at p√•virke main
- T√¶nk: Separate arbejdsrum

**Commit:**
- Et snapshot af dine √¶ndringer
- Permanent historie af hvad der blev √¶ndret
- T√¶nk: Save point i et spil

**Push:**
- Send dine lokale commits til GitHub
- G√∏r dine √¶ndringer synlige for andre
- T√¶nk: Upload til skyen

**Pull:**
- Hent √¶ndringer fra GitHub til din lokale computer
- Hold din kode opdateret
- T√¶nk: Download fra skyen

**Merge:**
- Kombiner to branches
- Integrer din feature i main
- T√¶nk: Flet to dokumenter sammen

---

## üåø Branch Workflow

### Branch navngivning

**Brug beskrivende navne:**

```bash
# ‚úÖ GODT:
feature/add-square-function
fix/division-by-zero-error
refactor/clean-calculator-code
docs/update-readme
test/improve-coverage

# ‚ùå D√ÖRLIGT:
new-stuff
fix
test123
johns-branch
```

**Konventioner:**
- `feature/` - Ny funktionalitet
- `fix/` - Bug fixes
- `refactor/` - Code forbedringer
- `docs/` - Dokumentation
- `test/` - Test forbedringer
- `chore/` - Vedligehold (dependencies osv.)

### Se dine branches

```bash
# Se lokale branches
git branch

# Se alle branches (inkl. remote)
git branch -a

# Se hvilken branch du er p√•
git status
```

---

## üìÖ Daglig Workflow

### Scenario 1: Start ny feature

```bash
# 1. S√∏rg for du er p√• main og har seneste √¶ndringer
git checkout main
git pull origin main

# 2. Lav ny feature branch
git checkout -b feature/add-square-function

# 3. Verificer du er p√• den nye branch
git branch
# * feature/add-square-function  (‚Üê stjerne = aktiv branch)
#   main
```

### Scenario 2: Arbejd p√• din feature

```bash
# 1. Lav dine √¶ndringer i VSCode
# - Rediger filer
# - Tilf√∏j ny funktionalitet
# - Skriv tests

# 2. Se hvad der er √¶ndret
git status

# 3. Test lokalt
pytest tests/ -v

# 4. Tilf√∏j dine √¶ndringer til staging
git add .
# Eller specifik fil:
git add my_calculator/calculator.py tests/test_calculator.py

# 5. Commit med beskrivende besked
git commit -m "Added square function with comprehensive tests"

# 6. Push til GitHub
git push origin feature/add-square-function
```

### Scenario 3: Se GitHub Actions teste din branch

```bash
# Efter push:
# 1. G√• til GitHub.com
# 2. Dit repository ‚Üí Actions tab
# 3. Se din branch blive testet ‚úÖ
# Men den deployer IKKE til Railway endnu!
```

### Scenario 4: Merge til main

**Option A: Via GitHub Pull Request (Anbefalet)**

```bash
# 1. Din branch er pushed
git push origin feature/add-square-function

# 2. P√• GitHub.com:
# - G√• til repository
# - Klik "Pull requests"
# - Klik "New pull request"
# - Base: main, Compare: feature/add-square-function
# - Klik "Create pull request"
# - Skriv beskrivelse
# - Vent p√• at tests er gr√∏nne ‚úÖ
# - Klik "Merge pull request"
# - Klik "Confirm merge"

# 3. Opdater din lokale main
git checkout main
git pull origin main

# 4. Slet feature branch (valgfrit)
git branch -d feature/add-square-function
git push origin --delete feature/add-square-function
```

**Option B: Direkte merge lokalt**

```bash
# 1. Skift til main
git checkout main

# 2. Hent seneste fra GitHub
git pull origin main

# 3. Merge din feature
git merge feature/add-square-function

# 4. Push til GitHub
git push origin main

# 5. Nu deployer Railway! üöÄ

# 6. Slet feature branch (valgfrit)
git branch -d feature/add-square-function
```

---

## üîÑ Pull Requests (PRs)

### Hvad er en Pull Request?

En formel anmodning om at merge din branch til main:
- ‚úÖ Code review mulighed
- ‚úÖ Diskussion af √¶ndringer
- ‚úÖ Automatiske tests
- ‚úÖ Historik og dokumentation

### Lav en god PR

**1. Beskrivende titel:**
```
‚úÖ GODT: "Add square function with comprehensive tests"
‚ùå D√ÖRLIGT: "Update"
```

**2. God beskrivelse:**
```markdown
## Hvad
Tilf√∏jet square() funktion til Calculator klasse

## Hvorfor
Kunder har bedt om mulighed for at kvadrere tal

## √Ündringer
- Tilf√∏jet square() metode i calculator.py
- Tilf√∏jet test_square() med 5 test cases
- Opdateret README med dokumentation

## Test
- ‚úÖ Alle tests best√•et lokalt
- ‚úÖ Coverage stadig 100%
- ‚úÖ GitHub Actions gr√∏n

## Screenshots
[hvis relevant]
```

**3. Link til issue (hvis relevant):**
```markdown
Fixes #42
Closes #38
```

### Review din egen PR

```bash
# F√∏r du laver PR:
1. K√∏r tests lokalt
   pytest tests/ -v

2. Check code quality
   flake8 .

3. L√¶s dine √¶ndringer igennem
   git diff main

4. Test i browser (hvis web app)
   python app.py
```

---

## üîÄ Merge Strategier

### Strategy 1: Merge Commit (Standard)

```bash
git checkout main
git merge feature/add-square-function
```

**Resultat:**
```
main:     A---B---C-------E
                   \     /
feature:            D---/
```

**Fordele:**
- ‚úÖ Bevarer fuld historie
- ‚úÖ Kan se hvorn√•r feature blev merged

**Ulemper:**
- ‚ö†Ô∏è Mange merge commits kan rode historikken

### Strategy 2: Squash Merge

```bash
git checkout main
git merge --squash feature/add-square-function
git commit -m "Add square function"
```

**Resultat:**
```
main:     A---B---C---D (alle feature commits squashed)
```

**Fordele:**
- ‚úÖ Ren historie (√©n commit per feature)
- ‚úÖ Lettere at revert

**Ulemper:**
- ‚ö†Ô∏è Mister detaljeret commit historie

### Strategy 3: Rebase

```bash
git checkout feature/add-square-function
git rebase main
git checkout main
git merge feature/add-square-function
```

**Resultat:**
```
main:     A---B---C---D (line√¶r historie)
```

**Fordele:**
- ‚úÖ Helt line√¶r historie
- ‚úÖ Ingen merge commits

**Ulemper:**
- ‚ö†Ô∏è Mere kompleks
- ‚ö†Ô∏è Kan v√¶re farligt hvis allerede pushed

**Anbefaling for begyndere: Brug standard merge!**

---

## üêõ Fejlfinding

### Problem 1: Merge conflicts

**Symptom:**
```bash
git merge feature/my-feature
# CONFLICT (content): Merge conflict in calculator.py
# Automatic merge failed
```

**L√∏sning:**
```bash
# 1. Se hvilke filer har conflicts
git status

# 2. √Öbn filen i VSCode
# Du vil se:
<<<<<<< HEAD
def add(self, a, b):
    return a + b
=======
def add(self, x, y):
    return x + y
>>>>>>> feature/my-feature

# 3. Redig√©r filen - v√¶lg hvad du vil beholde
def add(self, a, b):
    return a + b

# 4. Gem filen

# 5. Mark som resolved
git add calculator.py

# 6. F√¶rdigg√∏r merge
git commit -m "Resolved merge conflict in calculator.py"
```

### Problem 2: Pushed til forkert branch

```bash
# Hvis du har pushed til main ved en fejl:

# 1. Se log
git log

# 2. Revert sidste commit
git revert HEAD

# 3. Push
git push origin main
```

### Problem 3: Vil fortryde lokale √¶ndringer

```bash
# Kass√©r alle √¶ndringer i working directory
git checkout .

# Eller specifik fil
git checkout -- calculator.py

# Kass√©r ogs√• staged √¶ndringer
git reset --hard HEAD
```

### Problem 4: Branch er bagud

```bash
# Din feature branch er bagud i forhold til main

# 1. Skift til din branch
git checkout feature/my-feature

# 2. Hent seneste fra main
git pull origin main

# 3. L√∏s eventuelle conflicts

# 4. Push
git push origin feature/my-feature
```

### Problem 5: "Your branch is behind"

```bash
# Besked: Your branch is behind 'origin/main' by 3 commits

# L√∏sning:
git pull origin main
```

---

## ‚≠ê Best Practices

### 1. Sm√•, fokuserede branches

**‚úÖ GODT:**
```bash
feature/add-square-function      # √ân funktion
fix/division-by-zero            # √ât problem
```

**‚ùå D√ÖRLIGT:**
```bash
feature/add-all-math-functions   # For meget p√• √©n gang
fix/everything                   # Ikke fokuseret
```

### 2. Commit ofte

```bash
# Flere sm√• commits er bedre end √©n stor

git commit -m "Add square function"
git commit -m "Add tests for square function"
git commit -m "Update documentation"

# Ikke:
git commit -m "Did a lot of stuff"
```

### 3. Beskrivende commit beskeder

**‚úÖ GODT:**
```bash
git commit -m "Fix division by zero error in divide method"
git commit -m "Add comprehensive tests for square function"
git commit -m "Refactor calculator class for better readability"
```

**‚ùå D√ÖRLIGT:**
```bash
git commit -m "fix"
git commit -m "update"
git commit -m "more changes"
git commit -m "asdf"
```

### 4. Pull f√∏r push

```bash
# F√∏r du pusher, hent seneste √¶ndringer:
git pull origin main
# L√∏s eventuelle conflicts
git push origin main
```

### 5. Beskyt main branch

**GitHub Settings ‚Üí Branches ‚Üí Branch protection rules:**
- ‚úÖ Require pull request reviews
- ‚úÖ Require status checks (tests m√• best√•)
- ‚úÖ Ingen force push til main

### 6. Slet branches efter merge

```bash
# Lokalt
git branch -d feature/completed-feature

# Remote
git push origin --delete feature/completed-feature
```

---

## üìù Cheat Sheet

### Daglig brug

```bash
# Se status
git status

# Se branches
git branch

# Lav ny branch
git checkout -b feature/new-thing

# Skift branch
git checkout main

# Tilf√∏j √¶ndringer
git add .

# Commit
git commit -m "Beskrivelse"

# Push
git push origin branch-navn

# Pull
git pull origin main

# Merge
git checkout main
git merge feature/my-feature

# Slet branch
git branch -d feature/old-feature
```

### Nyttige kommandoer

```bash
# Se log
git log --oneline

# Se √¶ndringer
git diff

# Se hvem der √¶ndrede hvad
git blame calculator.py

# S√∏g i commits
git log --grep="square"

# Se remote URLs
git remote -v

# Ryd op i branches
git fetch --prune
```

### Undo kommandoer

```bash
# Undo sidste commit (keep changes)
git reset --soft HEAD~1

# Undo sidste commit (discard changes)
git reset --hard HEAD~1

# Undo √¶ndringer i fil
git checkout -- filename.py

# Undo staged changes
git reset HEAD filename.py

# Revert pushed commit
git revert HEAD
```

---

## üéØ Komplet Workflow Eksempel

### Scenario: Tilf√∏j modulo funktion

```bash
# DAG 1: Start feature
git checkout main
git pull origin main
git checkout -b feature/add-modulo
# [Lav √¶ndringer i VSCode]
pytest tests/ -v
git add .
git commit -m "Add modulo function skeleton"
git push origin feature/add-modulo

# DAG 2: Tilf√∏j tests
# [Lav tests]
pytest tests/ -v
git add tests/test_calculator.py
git commit -m "Add comprehensive tests for modulo"
git push origin feature/add-modulo

# DAG 3: Dokumentation
# [Opdater README]
git add README.md
git commit -m "Document modulo function usage"
git push origin feature/add-modulo

# DAG 4: Review og merge
# P√• GitHub: Lav Pull Request
# Review kode
# Se at tests er gr√∏nne ‚úÖ
# Merge PR

# Lokalt: Opdater main
git checkout main
git pull origin main
# Railway deployer automatisk! üöÄ

# Cleanup
git branch -d feature/add-modulo
git push origin --delete feature/add-modulo
```

---

## üìö Yderligere Ressourcer

**Visualisering:**
- https://git-school.github.io/visualizing-git/
- https://learngitbranching.js.org/

**Guides:**
- https://guides.github.com/
- https://www.atlassian.com/git/tutorials

**Interaktiv l√¶ring:**
- https://try.github.io/

---

## üéì Quiz: Test din forst√•else

1. **Hvad g√∏r `git checkout -b feature/new`?**
   - Laver og skifter til ny branch

2. **Hvorn√•r deployer Railway?**
   - N√•r √¶ndringer merges til main branch

3. **Hvad er forskellen p√• `git pull` og `git push`?**
   - pull = download fra GitHub
   - push = upload til GitHub

4. **Hvorfor bruge feature branches?**
   - Test nye features uden at p√•virke main
   - Code review f√∏r merge
   - Hold main stable

5. **Hvad g√∏r `git status`?**
   - Viser hvilke filer er √¶ndret
   - Viser hvilken branch du er p√•
   - Viser hvad der skal committes

---

## ‚úÖ Tjekliste for hver feature

```
[ ] Lav feature branch fra opdateret main
[ ] Lav √¶ndringer
[ ] Test lokalt (pytest)
[ ] Commit med god besked
[ ] Push til GitHub
[ ] Se at GitHub Actions er gr√∏n
[ ] Lav Pull Request
[ ] Review kode
[ ] Merge til main
[ ] Verificer deployment p√• Railway
[ ] Slet feature branch
[ ] Opdater lokal main
```

---

**God arbejdslyst med Git! üöÄ**

*Husk: Commit tidligt, commit ofte, og lav sm√• fokuserede √¶ndringer!*
